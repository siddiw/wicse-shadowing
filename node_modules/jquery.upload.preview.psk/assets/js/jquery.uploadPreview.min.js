(function($){$.extend({uploadPreview:function(options){var settings=$.extend({input_field:".image-input",preview_box:".image-preview",label_field:".image-label",label_default:"Choose File",label_selected:"Change File",no_label:!1,success_callback:null,},options);if(window.File&&window.FileList&&window.FileReader){if(typeof($(settings.input_field))!=='undefined'&&$(settings.input_field)!==null){$(settings.input_field).change(function(){var files=this.files;if(files.length>0){var file=files[0];var reader=new FileReader();reader.addEventListener("load",function(event){var loadedFile=event.target;if(file.type.match('image')){$(settings.preview_box).attr("src",loadedFile.result)}else if(file.type.match('audio')){$(settings.preview_box).html("<audio controls><source src='"+loadedFile.result+"' type='"+file.type+"' />Your browser does not support the audio element.</audio>")}else{alert("This file type is not supported yet.")}});if(settings.no_label==!1){$(settings.label_field).html(settings.label_selected)}
reader.readAsDataURL(file);if(settings.success_callback){settings.success_callback()}}else{if(settings.no_label==!1){$(settings.label_field).html(settings.label_default)}
$(settings.preview_box).css("background-image","none");$(settings.preview_box+" audio").remove()}})}}else{alert("You need a browser with file reader support, to use this form properly.");return!1}}})})(jQuery)
