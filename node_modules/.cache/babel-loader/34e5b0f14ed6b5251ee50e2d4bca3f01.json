{"ast":null,"code":"!function (t) {\n  \"object\" == typeof module && \"object\" == typeof module.exports ? module.exports = t(require(\"jquery\"), window, document) : t(jQuery, window, document);\n}(function (t, e, i, s) {\n  function n(e, i) {\n    var s = this;\n    return this.settings = i, this.elems = {}, this.element = e, this._cssClasses = [\"chocolat-open\", \"chocolat-in-container\", \"chocolat-cover\", \"chocolat-zoomable\", \"chocolat-zoomed\"], !this.settings.setTitle && e.data(\"chocolat-title\") && (this.settings.setTitle = e.data(\"chocolat-title\")), this.element.find(this.settings.imageSelector).each(function () {\n      s.settings.images.push({\n        title: t(this).attr(\"title\"),\n        src: t(this).attr(s.settings.imageSource),\n        height: !1,\n        width: !1\n      });\n    }), this.element.find(this.settings.imageSelector).each(function (e) {\n      t(this).off(\"click.chocolat\").on(\"click.chocolat\", function (t) {\n        s.init(e), t.preventDefault();\n      });\n    }), this;\n  }\n\n  var o = 0;\n  t.extend(n.prototype, {\n    init: function (t) {\n      return this.settings.initialized || (this.setDomContainer(), this.markup(), this.events(), this.settings.lastImage = this.settings.images.length - 1, this.settings.initialized = !0), this.settings.afterInitialize.call(this), this.load(t);\n    },\n    preload: function (e) {\n      var i = t.Deferred();\n\n      if (\"undefined\" != typeof this.settings.images[e]) {\n        var s = new Image();\n        return s.onload = function () {\n          i.resolve(s);\n        }, s.src = this.settings.images[e].src, i;\n      }\n    },\n    load: function (e) {\n      var i = this;\n\n      if (this.settings.fullScreen && this.openFullScreen(), this.settings.currentImage !== e) {\n        this.elems.overlay.fadeIn(this.settings.duration), this.elems.wrapper.fadeIn(this.settings.duration), this.elems.domContainer.addClass(\"chocolat-open\"), this.settings.timer = setTimeout(function () {\n          \"undefined\" != typeof i.elems && t.proxy(i.elems.loader.fadeIn(), i);\n        }, this.settings.duration);\n        var s = this.preload(e).then(function (t) {\n          return i.place(e, t);\n        }).then(function (t) {\n          return i.appear(e);\n        }).then(function (t) {\n          i.zoomable(), i.settings.afterImageLoad.call(i);\n        }),\n            n = e + 1;\n        return \"undefined\" != typeof this.settings.images[n] && this.preload(n), s;\n      }\n    },\n    place: function (t, e) {\n      var i,\n          s = this;\n      return this.settings.currentImage = t, this.description(), this.pagination(), this.arrows(), this.storeImgSize(e, t), i = this.fit(t, s.elems.wrapper), this.center(i.width, i.height, i.left, i.top, 0);\n    },\n    center: function (t, e, i, s, n) {\n      return this.elems.content.css(\"overflow\", \"visible\").animate({\n        width: t,\n        height: e,\n        left: i,\n        top: s\n      }, n).promise();\n    },\n    appear: function (t) {\n      var e = this;\n      clearTimeout(this.settings.timer), this.elems.loader.stop().fadeOut(300, function () {\n        e.elems.img.attr(\"src\", e.settings.images[t].src);\n      });\n    },\n    fit: function (e, i) {\n      var s,\n          n,\n          o = this.settings.images[e].height,\n          a = this.settings.images[e].width,\n          l = t(i).height(),\n          r = t(i).width(),\n          c = this.getOutMarginH(),\n          h = this.getOutMarginW(),\n          m = r - h,\n          g = l - c,\n          u = g / m,\n          d = l / r,\n          f = o / a;\n      return \"cover\" == this.settings.imageSize ? f < d ? (s = l, n = s / f) : (n = r, s = n * f) : \"native\" == this.settings.imageSize ? (s = o, n = a) : (f > u ? (s = g, n = s / f) : (n = m, s = n * f), \"default\" === this.settings.imageSize && (n >= a || s >= o) && (n = a, s = o)), {\n        height: s,\n        width: n,\n        top: (l - s) / 2,\n        left: (r - n) / 2\n      };\n    },\n    change: function (t) {\n      this.zoomOut(0), this.zoomable();\n      var e = this.settings.currentImage + parseInt(t);\n\n      if (e > this.settings.lastImage) {\n        if (this.settings.loop) return this.load(0);\n      } else {\n        if (!(e < 0)) return this.load(e);\n        if (this.settings.loop) return this.load(this.settings.lastImage);\n      }\n    },\n    arrows: function () {\n      this.settings.loop ? t([this.elems.left[0], this.elems.right[0]]).addClass(\"active\") : this.settings.linkImages ? (this.settings.currentImage == this.settings.lastImage ? this.elems.right.removeClass(\"active\") : this.elems.right.addClass(\"active\"), 0 === this.settings.currentImage ? this.elems.left.removeClass(\"active\") : this.elems.left.addClass(\"active\")) : t([this.elems.left[0], this.elems.right[0]]).removeClass(\"active\");\n    },\n    description: function () {\n      var t = this;\n      this.elems.description.html(t.settings.images[t.settings.currentImage].title);\n    },\n    pagination: function () {\n      var t = this,\n          e = this.settings.lastImage + 1,\n          i = this.settings.currentImage + 1;\n      this.elems.pagination.html(i + \" \" + t.settings.separator2 + e);\n    },\n    storeImgSize: function (t, e) {\n      \"undefined\" != typeof t && (this.settings.images[e].height && this.settings.images[e].width || (this.settings.images[e].height = t.height, this.settings.images[e].width = t.width));\n    },\n    close: function () {\n      if (this.settings.fullscreenOpen) return void this.exitFullScreen();\n      var e = [this.elems.overlay[0], this.elems.loader[0], this.elems.wrapper[0]],\n          i = this,\n          s = t.when(t(e).fadeOut(200)).done(function () {\n        i.elems.domContainer.removeClass(\"chocolat-open\");\n      });\n      return this.settings.currentImage = !1, s;\n    },\n    destroy: function () {\n      this.element.removeData(), this.element.find(this.settings.imageSelector).off(\"click.chocolat\"), this.settings.initialized && (this.settings.fullscreenOpen && this.exitFullScreen(), this.settings.currentImage = !1, this.settings.initialized = !1, this.elems.domContainer.removeClass(this._cssClasses.join(\" \")), this.elems.wrapper.remove());\n    },\n    getOutMarginW: function () {\n      var t = this.elems.left.outerWidth(!0),\n          e = this.elems.right.outerWidth(!0);\n      return t + e;\n    },\n    getOutMarginH: function () {\n      return this.elems.top.outerHeight(!0) + this.elems.bottom.outerHeight(!0);\n    },\n    markup: function () {\n      this.elems.domContainer.addClass(\"chocolat-open \" + this.settings.className), \"cover\" == this.settings.imageSize && this.elems.domContainer.addClass(\"chocolat-cover\"), this.settings.container !== e && this.elems.domContainer.addClass(\"chocolat-in-container\"), this.elems.wrapper = t(\"<div/>\", {\n        \"class\": \"chocolat-wrapper\",\n        id: \"chocolat-content-\" + this.settings.setIndex\n      }).appendTo(this.elems.domContainer), this.elems.overlay = t(\"<div/>\", {\n        \"class\": \"chocolat-overlay\"\n      }).appendTo(this.elems.wrapper), this.elems.loader = t(\"<div/>\", {\n        \"class\": \"chocolat-loader\"\n      }).appendTo(this.elems.wrapper), this.elems.content = t(\"<div/>\", {\n        \"class\": \"chocolat-content\"\n      }).appendTo(this.elems.wrapper), this.elems.img = t(\"<img/>\", {\n        \"class\": \"chocolat-img\",\n        src: \"\"\n      }).appendTo(this.elems.content), this.elems.top = t(\"<div/>\", {\n        \"class\": \"chocolat-top\"\n      }).appendTo(this.elems.wrapper), this.elems.left = t(\"<div/>\", {\n        \"class\": \"chocolat-left\"\n      }).appendTo(this.elems.wrapper), this.elems.right = t(\"<div/>\", {\n        \"class\": \"chocolat-right\"\n      }).appendTo(this.elems.wrapper), this.elems.bottom = t(\"<div/>\", {\n        \"class\": \"chocolat-bottom\"\n      }).appendTo(this.elems.wrapper), this.elems.close = t(\"<span/>\", {\n        \"class\": \"chocolat-close\"\n      }).appendTo(this.elems.top), this.elems.fullscreen = t(\"<span/>\", {\n        \"class\": \"chocolat-fullscreen\"\n      }).appendTo(this.elems.bottom), this.elems.description = t(\"<span/>\", {\n        \"class\": \"chocolat-description\"\n      }).appendTo(this.elems.bottom), this.elems.pagination = t(\"<span/>\", {\n        \"class\": \"chocolat-pagination\"\n      }).appendTo(this.elems.bottom), this.elems.setTitle = t(\"<span/>\", {\n        \"class\": \"chocolat-set-title\",\n        html: this.settings.setTitle\n      }).appendTo(this.elems.bottom), this.settings.afterMarkup.call(this);\n    },\n    openFullScreen: function () {\n      var t = this.elems.wrapper[0];\n      t.requestFullscreen ? (this.settings.fullscreenOpen = !0, t.requestFullscreen()) : t.mozRequestFullScreen ? (this.settings.fullscreenOpen = !0, t.mozRequestFullScreen()) : t.webkitRequestFullscreen ? (this.settings.fullscreenOpen = !0, t.webkitRequestFullscreen()) : t.msRequestFullscreen ? (t.msRequestFullscreen(), this.settings.fullscreenOpen = !0) : this.settings.fullscreenOpen = !1;\n    },\n    exitFullScreen: function () {\n      i.exitFullscreen ? (i.exitFullscreen(), this.settings.fullscreenOpen = !1) : i.mozCancelFullScreen ? (i.mozCancelFullScreen(), this.settings.fullscreenOpen = !1) : i.webkitExitFullscreen ? (i.webkitExitFullscreen(), this.settings.fullscreenOpen = !1) : i.msExitFullscreen ? (i.msExitFullscreen(), this.settings.fullscreenOpen = !1) : this.settings.fullscreenOpen = !0;\n    },\n    events: function () {\n      var s = this;\n      t(i).off(\"keydown.chocolat\").on(\"keydown.chocolat\", function (t) {\n        s.settings.initialized && (37 == t.keyCode ? s.change(-1) : 39 == t.keyCode ? s.change(1) : 27 == t.keyCode && s.close());\n      }), this.elems.wrapper.find(\".chocolat-right\").off(\"click.chocolat\").on(\"click.chocolat\", function () {\n        s.change(1);\n      }), this.elems.wrapper.find(\".chocolat-left\").off(\"click.chocolat\").on(\"click.chocolat\", function () {\n        return s.change(-1);\n      }), t([this.elems.overlay[0], this.elems.close[0]]).off(\"click.chocolat\").on(\"click.chocolat\", function () {\n        return s.close();\n      }), this.elems.fullscreen.off(\"click.chocolat\").on(\"click.chocolat\", function () {\n        return s.settings.fullscreenOpen ? void s.exitFullScreen() : void s.openFullScreen();\n      }), s.settings.backgroundClose && this.elems.overlay.off(\"click.chocolat\").on(\"click.chocolat\", function () {\n        return s.close();\n      }), this.elems.wrapper.off(\"click.chocolat\").on(\"click.chocolat\", function (t) {\n        return s.zoomOut(t);\n      }), this.elems.wrapper.find(\".chocolat-img\").off(\"click.chocolat\").on(\"click.chocolat\", function (t) {\n        if (null === s.settings.initialZoomState && s.elems.domContainer.hasClass(\"chocolat-zoomable\")) return t.stopPropagation(), s.zoomIn(t);\n      }), this.elems.wrapper.mousemove(function (e) {\n        if (null !== s.settings.initialZoomState && !s.elems.img.is(\":animated\")) {\n          var i = t(this).offset(),\n              n = t(this).height(),\n              o = t(this).width(),\n              a = s.settings.images[s.settings.currentImage],\n              l = a.width,\n              r = a.height,\n              c = [e.pageX - o / 2 - i.left, e.pageY - n / 2 - i.top],\n              h = 0;\n\n          if (l > o) {\n            var m = s.settings.zoomedPaddingX(l, o);\n            h = c[0] / (o / 2), h = ((l - o) / 2 + m) * h;\n          }\n\n          var g = 0;\n\n          if (r > n) {\n            var u = s.settings.zoomedPaddingY(r, n);\n            g = c[1] / (n / 2), g = ((r - n) / 2 + u) * g;\n          }\n\n          var d = {\n            \"margin-left\": -h + \"px\",\n            \"margin-top\": -g + \"px\"\n          };\n          \"undefined\" != typeof e.duration ? t(s.elems.img).stop(!1, !0).animate(d, e.duration) : t(s.elems.img).stop(!1, !0).css(d);\n        }\n      }), t(e).on(\"resize\", function () {\n        s.settings.initialized && s.settings.currentImage !== !1 && s.debounce(50, function () {\n          var t = s.fit(s.settings.currentImage, s.elems.wrapper);\n          s.center(t.width, t.height, t.left, t.top, 0), s.zoomable();\n        });\n      });\n    },\n    zoomable: function () {\n      var t = this.settings.images[this.settings.currentImage],\n          e = this.elems.wrapper.width(),\n          i = this.elems.wrapper.height(),\n          s = !(!this.settings.enableZoom || !(t.width > e || t.height > i)),\n          n = this.elems.img.width() > t.width || this.elems.img.height() > t.height;\n      s && !n ? this.elems.domContainer.addClass(\"chocolat-zoomable\") : this.elems.domContainer.removeClass(\"chocolat-zoomable\");\n    },\n    zoomIn: function (e) {\n      this.settings.initialZoomState = this.settings.imageSize, this.settings.imageSize = \"native\";\n      var i = t.Event(\"mousemove\");\n      i.pageX = e.pageX, i.pageY = e.pageY, i.duration = this.settings.duration, this.elems.wrapper.trigger(i), this.elems.domContainer.addClass(\"chocolat-zoomed\");\n      var s = this.fit(this.settings.currentImage, this.elems.wrapper);\n      return this.center(s.width, s.height, s.left, s.top, this.settings.duration);\n    },\n    zoomOut: function (t, e) {\n      if (null !== this.settings.initialZoomState && this.settings.currentImage !== !1) {\n        e = e || this.settings.duration, this.settings.imageSize = this.settings.initialZoomState, this.settings.initialZoomState = null, this.elems.img.animate({\n          margin: 0\n        }, e), this.elems.domContainer.removeClass(\"chocolat-zoomed\");\n        var i = this.fit(this.settings.currentImage, this.elems.wrapper);\n        return this.center(i.width, i.height, i.left, i.top, e);\n      }\n    },\n    setDomContainer: function () {\n      this.settings.container === e ? this.elems.domContainer = t(\"body\") : this.elems.domContainer = t(this.settings.container);\n    },\n    debounce: function (t, e) {\n      clearTimeout(this.settings.timerDebounce), this.settings.timerDebounce = setTimeout(function () {\n        e();\n      }, t);\n    },\n    api: function () {\n      var t = this;\n      return {\n        open: function (e) {\n          return e = parseInt(e) || 0, t.init(e);\n        },\n        close: function () {\n          return t.close();\n        },\n        next: function () {\n          return t.change(1);\n        },\n        prev: function () {\n          return t.change(-1);\n        },\n        \"goto\": function (e) {\n          return t.open(e);\n        },\n        current: function () {\n          return t.settings.currentImage;\n        },\n        place: function () {\n          return t.place(t.settings.currentImage, t.settings.duration);\n        },\n        destroy: function () {\n          return t.destroy();\n        },\n        set: function (e, i) {\n          return t.settings[e] = i, i;\n        },\n        get: function (e) {\n          return t.settings[e];\n        },\n        getElem: function (e) {\n          return t.elems[e];\n        }\n      };\n    }\n  });\n  var a = {\n    container: e,\n    imageSelector: \".chocolat-image\",\n    className: \"\",\n    imageSize: \"default\",\n    initialZoomState: null,\n    fullScreen: !1,\n    loop: !1,\n    linkImages: !0,\n    duration: 300,\n    setTitle: \"\",\n    separator2: \"/\",\n    setIndex: 0,\n    firstImage: 0,\n    lastImage: !1,\n    currentImage: !1,\n    initialized: !1,\n    timer: !1,\n    timerDebounce: !1,\n    images: [],\n    enableZoom: !0,\n    imageSource: \"href\",\n    afterInitialize: function () {},\n    afterMarkup: function () {},\n    afterImageLoad: function () {},\n    zoomedPaddingX: function (t, e) {\n      return 0;\n    },\n    zoomedPaddingY: function (t, e) {\n      return 0;\n    }\n  };\n  return t.fn.Chocolat = function (e) {\n    return this.each(function () {\n      o++;\n      var i = t.extend(!0, {}, a, e, {\n        setIndex: o\n      });\n      t.data(this, \"chocolat\") || t.data(this, \"chocolat\", new n(t(this), i));\n    });\n  }, t.fn.Chocolat;\n});","map":null,"metadata":{},"sourceType":"script"}